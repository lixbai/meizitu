function NewsIndex(){var e=this;e.page=2,e.category_id=0,e.loadMoreBtn=$("#load_more_news")}NewsIndex.prototype.run=function(){this.listenSwitchCategory(),this.listenLoadMoreNews()},NewsIndex.prototype.listenSwitchCategory=function(){var s=this;$(".list-group-category").children().click(function(e){var a=$(this).attr("data-id");e.preventDefault(),xfzajax.get({url:"/news/list/",data:{p:1,category_id:a},success:function(e){var t,n,o;200===e.code&&(t=e.data,console.log(t),n=template("test",{newses:t}),(o=$(".news_item")).empty(),o.append(n),s.page=2,s.category_id=a,s.loadMoreBtn.show())}})})},NewsIndex.prototype.listenLoadMoreNews=function(){var o=this,a=$("#load_more_news");console.log(a),a.click(function(e){xfzajax.get({url:"/news/list/",data:{p:o.page,category_id:o.category_id},success:function(e){var t,n;200===e.code&&(t=e.data,console.log(t),0<t.length?(n=template("test",{newses:t}),$(".news_item").append(n),o.page+=1):a.hide())}})})},$(function(){(new NewsIndex).run()});