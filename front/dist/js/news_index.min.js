function NewsIndex(){var e=this;e.page=2,e.category_id=0,e.loadMoreBtn=$("#load_more_news")}NewsIndex.prototype.run=function(){this.listenSwitchCategory(),this.listenLoadMoreNews()},NewsIndex.prototype.listenSwitchCategory=function(){var i=this;$(".list-group-category").children().click(function(e){var t=$(this),s=t.attr("data-id");t.siblings().children().removeClass("bg-warning text-white"),t.children().addClass("bg-warning text-white"),e.preventDefault(),m_ajax.get({url:"/news/list/",data:{p:1,category_id:s},success:function(e){var t,n,a;200===e.code&&(t=e.data,n=template("js_load_news",{newses:t}),(a=$(".news_item")).empty(),a.append(n),i.page=2,i.category_id=s,i.loadMoreBtn.show())}})})},NewsIndex.prototype.listenLoadMoreNews=function(){var a=this;a.loadMoreBtn.click(function(e){m_ajax.get({url:"/news/list/",data:{p:a.page,category_id:a.category_id},success:function(e){var t,n;200===e.code&&(0<(t=e.data).length?(n=template("js_load_news",{newses:t}),$(".news_item").append(n),a.page+=1):a.loadMoreBtn.hide())}})})},$(function(){(new NewsIndex).run()});